# ç”µå•†ç®¡ç†åå° API æ¥å£æ–‡æ¡£

## API V1 æ¥å£è¯´æ˜

- æ¥å£åŸºå‡†åœ°å€ï¼š`http://localhost:8888/api/private/v1/`
- æœåŠ¡ç«¯å·²å¼€å¯ CORS è·¨åŸŸæ”¯æŒ
- API V1 è®¤è¯ç»Ÿä¸€ä½¿ç”¨ Token è®¤è¯
- éœ€è¦æˆæƒçš„ API ï¼Œå¿…é¡»åœ¨è¯·æ±‚å¤´ä¸­ä½¿ç”¨ `Authorization` å­—æ®µæä¾› `token` ä»¤ç‰Œ
- ä½¿ç”¨ HTTP Status Code æ ‡è¯†çŠ¶æ€
- æ•°æ®è¿”å›æ ¼å¼ç»Ÿä¸€ä½¿ç”¨ JSON

### æ”¯æŒçš„è¯·æ±‚æ–¹æ³•

- GETï¼ˆSELECTï¼‰ï¼šä»æœåŠ¡å™¨å–å‡ºèµ„æºï¼ˆä¸€é¡¹æˆ–å¤šé¡¹ï¼‰ã€‚
- POSTï¼ˆCREATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æºã€‚
- PUTï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜åçš„å®Œæ•´èµ„æºï¼‰ã€‚
- PATCHï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜çš„å±æ€§ï¼‰ã€‚
- DELETEï¼ˆDELETEï¼‰ï¼šä»æœåŠ¡å™¨åˆ é™¤èµ„æºã€‚
- HEADï¼šè·å–èµ„æºçš„å…ƒæ•°æ®ã€‚
- OPTIONSï¼šè·å–ä¿¡æ¯ï¼Œå…³äºèµ„æºçš„å“ªäº›å±æ€§æ˜¯å®¢æˆ·ç«¯å¯ä»¥æ”¹å˜çš„ã€‚

### é€šç”¨è¿”å›çŠ¶æ€è¯´æ˜

| *çŠ¶æ€ç * |         *å«ä¹‰*        |                        *è¯´æ˜*                       |
|----------|-----------------------|-----------------------------------------------------|
|      200 | OK                    | è¯·æ±‚æˆåŠŸ                                            |
|      201 | CREATED               | åˆ›å»ºæˆåŠŸ                                            |
|      204 | DELETED               | åˆ é™¤æˆåŠŸ                                            |
|      400 | BAD REQUEST           | è¯·æ±‚çš„åœ°å€ä¸å­˜åœ¨æˆ–è€…åŒ…å«ä¸æ”¯æŒçš„å‚æ•°                |
|      401 | UNAUTHORIZED          | æœªæˆæƒ                                              |
|      403 | FORBIDDEN             | è¢«ç¦æ­¢è®¿é—®                                          |
|      404 | NOT FOUND             | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨                                    |
|      422 | Unprocesable entity   | [POST/PUT/PATCH] å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯ |
|      500 | INTERNAL SERVER ERROR | å†…éƒ¨é”™è¯¯                                            |
|          |                       |                                                     |

---

## ç™»å½•

### ç™»å½•éªŒè¯æ¥å£

* è¯·æ±‚è·¯å¾„ï¼šlogin
* è¯·æ±‚æ–¹æ³•ï¼špost
* è¯·æ±‚å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜ | å¤‡æ³¨     |
| -------- | -------- | -------- |
| username | ç”¨æˆ·å   | ä¸èƒ½ä¸ºç©º |
| password | å¯†ç      | ä¸èƒ½ä¸ºç©º |

* å“åº”å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜    | å¤‡æ³¨            |
| -------- | ----------- | --------------- |
| id       | ç”¨æˆ· ID     |                 |
| rid      | ç”¨æˆ·è§’è‰² ID |                 |
| username | ç”¨æˆ·å      |                 |
| mobile   | æ‰‹æœºå·      |                 |
| email    | é‚®ç®±        |                 |
| token    | ä»¤ç‰Œ        | åŸºäº jwt çš„ä»¤ç‰Œ |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "id": 500,
        "rid": 0,
        "username": "admin",
        "mobile": "123",
        "email": "123@qq.com",
        "token": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjUwMCwicmlkIjowLCJpYXQiOjE1MTI1NDQyOTksImV4cCI6MTUxMjYzMDY5OX0.eGrsrvwHm-tPsO9r_pxHIQ5i5L1kX9RX444uwnRGaIM"
    },
    "meta": {
        "msg": "ç™»å½•æˆåŠŸ",
        "status": 200
    }
}
```

## ç”¨æˆ·ç®¡ç†

### ç”¨æˆ·æ•°æ®åˆ—è¡¨

* è¯·æ±‚è·¯å¾„ï¼šusers
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜     | å¤‡æ³¨     |
| -------- | ------------ | -------- |
| query    | æŸ¥è¯¢å‚æ•°     | å¯ä»¥ä¸ºç©º |
| pagenum  | å½“å‰é¡µç      | ä¸èƒ½ä¸ºç©º |
| pagesize | æ¯é¡µæ˜¾ç¤ºæ¡æ•° | ä¸èƒ½ä¸ºç©º |

* å“åº”å‚æ•°

| å‚æ•°å    | å‚æ•°è¯´æ˜     | å¤‡æ³¨ |
| --------- | ------------ | ---- |
| totalpage | æ€»è®°å½•æ•°     |      |
| pagenum   | å½“å‰é¡µç      |      |
| users     | ç”¨æˆ·æ•°æ®é›†åˆ |      |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "totalpage": 5,
        "pagenum": 4,
        "users": [
            {
                "id": 25,
                "username": "tige117",
                "mobile": "18616358651",
                "type": 1,
                "openid": "",
                "email": "tige112@163.com",
                "create_time": "2017-11-09T20:36:26.000Z",
                "modify_time": null,
                "is_delete": false,
                "is_active": false
            }
        ]
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### æ·»åŠ ç”¨æˆ·

* è¯·æ±‚è·¯å¾„ï¼šusers
* è¯·æ±‚æ–¹æ³•ï¼špost
* è¯·æ±‚å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜ | å¤‡æ³¨     |
| -------- | -------- | -------- |
| username | ç”¨æˆ·åç§° | ä¸èƒ½ä¸ºç©º |
| password | ç”¨æˆ·å¯†ç  | ä¸èƒ½ä¸ºç©º |
| email    | é‚®ç®±     | å¯ä»¥ä¸ºç©º |
| mobile   | æ‰‹æœºå·   | å¯ä»¥ä¸ºç©º |

* å“åº”å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜    | å¤‡æ³¨ |
| -------- | ----------- | ---- |
| id       | ç”¨æˆ· ID     |      |
| rid      | ç”¨æˆ·è§’è‰² ID |      |
| username | ç”¨æˆ·å      |      |
| mobile   | æ‰‹æœºå·      |      |
| email    | é‚®ç®±        |      |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "id": 28,
        "username": "tige1200",
        "mobile": "test",
        "type": 1,
        "openid": "",
        "email": "test@test.com",
        "create_time": "2017-11-10T03:47:13.533Z",
        "modify_time": null,
        "is_delete": false,
        "is_active": false
    },
    "meta": {
        "msg": "ç”¨æˆ·åˆ›å»ºæˆåŠŸ",
        "status": 201
    }
}
```

### ä¿®æ”¹ç”¨æˆ·çŠ¶æ€

* è¯·æ±‚è·¯å¾„ï¼šusers/:uId/state/:type
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                                        |
| ------ | -------- | ------------------------------------------- |
| uId    | ç”¨æˆ· ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­`                       |
| type   | ç”¨æˆ·çŠ¶æ€ | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­`ï¼Œå€¼ä¸º true æˆ–è€… false |

* å“åº”æ•°æ®

```javascript
{
  "data": {
    "id": 566,
    "rid": 30,
    "username": "admin",
    "mobile": "123456",
    "email": "bb@itcast.com",
    "mg_state": 0
  },
  "meta": {
    "msg": "è®¾ç½®çŠ¶æ€æˆåŠŸ",
    "status": 200
  }
}
```

### æ ¹æ® ID æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯

* è¯·æ±‚è·¯å¾„ï¼šusers/:id
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| id     | ç”¨æˆ· ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”å‚æ•°

| å‚æ•°å  | å‚æ•°è¯´æ˜ | å¤‡æ³¨ |
| ------- | -------- | ---- |
| id      | ç”¨æˆ· ID  |      |
| role_id | è§’è‰² ID  |      |
| mobile  | æ‰‹æœºå·   |      |
| email   | é‚®ç®±     |      |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "id": 503,
        "username": "admin3",
        "role_id": 0,
        "mobile": "00000",
        "email": "new@new.com"
    },
    "meta": {
        "msg": "æ›´æ–°æˆåŠŸ",
        "status": 200
    }
}
```

### ç¼–è¾‘ç”¨æˆ·æäº¤

* è¯·æ±‚è·¯å¾„ï¼šusers/:id
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                        |
| ------ | -------- | --------------------------- |
| id     | ç”¨æˆ· id  | ä¸èƒ½ä¸ºç©º `å‚æ•°æ˜¯urlå‚æ•°:id` |
| email  | é‚®ç®±     | å¯ä»¥ä¸ºç©º                    |
| mobile | æ‰‹æœºå·   | å¯ä»¥ä¸ºç©º                    |

* å“åº”å‚æ•°

| å‚æ•°å  | å‚æ•°è¯´æ˜ | å¤‡æ³¨ |
| ------- | -------- | ---- |
| id      | ç”¨æˆ· ID  |      |
| role_id | è§’è‰² ID  |      |
| mobile  | æ‰‹æœºå·   |      |
| email   | é‚®ç®±     |      |

* å“åº”æ•°æ®

```javascript
/* 200è¡¨ç¤ºæˆåŠŸï¼Œ500è¡¨ç¤ºå¤±è´¥ */
{
    "data": {
        "id": 503,
        "username": "admin3",
        "role_id": 0,
        "mobile": "111",
        "email": "123@123.com"
    },
    "meta": {
        "msg": "æ›´æ–°æˆåŠŸ",
        "status": 200
    }
}
```

### åˆ é™¤å•ä¸ªç”¨æˆ·

* è¯·æ±‚è·¯å¾„ï¼šusers/:id
* è¯·æ±‚æ–¹æ³•ï¼šdelete
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                       |
| ------ | -------- | -------------------------- |
| id     | ç”¨æˆ· id  | ä¸èƒ½ä¸ºç©º`å‚æ•°æ˜¯urlå‚æ•°:id` |

* å“åº”å‚æ•°

* å“åº”æ•°æ®

```javascript
{
    "data": null,
    "meta": {
        "msg": "åˆ é™¤æˆåŠŸ",
        "status": 200
    }
}
```

### åˆ†é…ç”¨æˆ·è§’è‰²

* è¯·æ±‚è·¯å¾„ï¼šusers/:id/role
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                       |
| ------ | -------- | -------------------------- |
| id     | ç”¨æˆ· ID  | ä¸èƒ½ä¸ºç©º`å‚æ•°æ˜¯urlå‚æ•°:id` |
| rid    | è§’è‰² id  | ä¸èƒ½ä¸ºç©º`å‚æ•°bodyå‚æ•°`     |

* å“åº”å‚æ•°

| å‚æ•°å  | å‚æ•°è¯´æ˜ | å¤‡æ³¨ |
| ------- | -------- | ---- |
| id      | ç”¨æˆ· ID  |      |
| role_id | è§’è‰² ID  |      |
| mobile  | æ‰‹æœºå·   |      |
| email   | é‚®ç®±     |      |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "id": 508,
        "rid": "30",
        "username": "asdf1",
        "mobile": "123123",
        "email": "adfsa@qq.com"
    },
    "meta": {
        "msg": "è®¾ç½®è§’è‰²æˆåŠŸ",
        "status": 200
    }
}
```

## æƒé™ç®¡ç†

### æ‰€æœ‰æƒé™åˆ—è¡¨

* è¯·æ±‚è·¯å¾„ï¼šrights/:type
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                                                                         |
| ------ | -------- | ---------------------------------------------------------------------------- |
| type   | ç±»å‹     | å€¼: list æˆ– tree , list åˆ—è¡¨æ˜¾ç¤ºæƒé™, tree æ ‘çŠ¶æ˜¾ç¤ºæƒé™,`å‚æ•°æ˜¯urlå‚æ•°:type` |

* å“åº”å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜     | å¤‡æ³¨ |
| -------- | ------------ | ---- |
| id       | æƒé™ ID      |      |
| authName | æƒé™è¯´æ˜     |      |
| level    | æƒé™å±‚çº§     |      |
| pid      | æƒé™çˆ¶ ID    |      |
| path     | å¯¹åº”è®¿é—®è·¯å¾„ |      |

* å“åº”æ•°æ®
  type=list

```javascript
  {
    "data": [
        {
            "id": 101,
            "authName": "å•†å“ç®¡ç†",
            "level": "0",
            "pid": 0,
            "path": null
        },
        {
            "id": 102,
            "authName": "è®¢å•ç®¡ç†",
            "level": "0",
            "pid": 0,
            "path": null
        }
    ],
    "meta": {
        "msg": "è·å–æƒé™åˆ—è¡¨æˆåŠŸ",
        "status": 200
    }
}
```

type=tree

```javascript
;[
  {
    data: [
      {
        id: 101,
        authName: 'å•†å“ç®¡ç†',
        path: null,
        pid: 0,
        children: [
          {
            id: 104,
            authName: 'å•†å“åˆ—è¡¨',
            path: null,
            pid: 101,
            children: [
              {
                id: 105,
                authName: 'æ·»åŠ å•†å“',
                path: null,
                pid: '104,101'
              }
            ]
          }
        ]
      }
    ],
    meta: {
      msg: 'è·å–æƒé™åˆ—è¡¨æˆåŠŸ',
      status: 200
    }
  }
]
```

### å·¦ä¾§èœå•æƒé™

* è¯·æ±‚è·¯å¾„ï¼šmenus
* è¯·æ±‚æ–¹æ³•ï¼šget
* å“åº”æ•°æ®

```javascript
{
    "data":
        {
            "id": 101,
            "authName": "å•†å“ç®¡ç†",
            "path": null,
            "children": [
                {
                    "id": 104,
                    "authName": "å•†å“åˆ—è¡¨",
                    "path": null,
                    "children": []
                }
            ]
        }
    "meta": {
        "msg": "è·å–èœå•åˆ—è¡¨æˆåŠŸ",
        "status": 200
    }
}
```

## è§’è‰²ç®¡ç†

### è§’è‰²åˆ—è¡¨

* è¯·æ±‚è·¯å¾„ï¼šroles
* è¯·æ±‚æ–¹æ³•ï¼šget
* å“åº”æ•°æ®è¯´æ˜
  * ç¬¬ä¸€å±‚ä¸ºè§’è‰²ä¿¡æ¯
  * ç¬¬äºŒå±‚å¼€å§‹ä¸ºæƒé™è¯´æ˜ï¼Œæƒé™ä¸€å…±æœ‰ 3 å±‚æƒé™
* å“åº”æ•°æ®

```javascript
{
    "data": [
        {
            "id": 30,
            "roleName": "ä¸»ç®¡",
            "roleDesc": "æŠ€æœ¯è´Ÿè´£äºº",
            "children": [
                {
                    "id": 101,
                    "authName": "å•†å“ç®¡ç†",
                    "path": null,
                    "children": [
                        {
                            "id": 104,
                            "authName": "å•†å“åˆ—è¡¨",
                            "path": null,
                            "children": [
                                {
                                    "id": 105,
                                    "authName": "æ·»åŠ å•†å“",
                                    "path": null
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ],
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### æ·»åŠ è§’è‰²

* è¯·æ±‚è·¯å¾„ï¼šroles
* è¯·æ±‚æ–¹æ³•ï¼špost
* è¯·æ±‚å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜ | å¤‡æ³¨     |
| -------- | -------- | -------- |
| roleName | è§’è‰²åç§° | ä¸èƒ½ä¸ºç©º |
| roleDesc | è§’è‰²æè¿° | å¯ä»¥ä¸ºç©º |

* å“åº”å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜ | å¤‡æ³¨ |
| -------- | -------- | ---- |
| roleId   | è§’è‰² ID  |      |
| roleName | è§’è‰²åç§° |      |
| roleDesc | è§’è‰²æè¿° |      |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "roleId": 40,
        "roleName": "admin2",
        "roleDesc": "admin2Desc"
    },
    "meta": {
        "msg": "åˆ›å»ºæˆåŠŸ",
        "status": 201
    }
}
```

### æ ¹æ® ID æŸ¥è¯¢è§’è‰²

* è¯·æ±‚è·¯å¾„ï¼šroles/:id
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| :id    | è§’è‰² ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜ | å¤‡æ³¨ |
| -------- | -------- | ---- |
| roleId   | è§’è‰² ID  |      |
| roleName | è§’è‰²åç§° |      |
| roleDesc | è§’è‰²æè¿° |      |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "roleId": 31,
        "roleName": "æµ‹è¯•è§’è‰²",
        "roleDesc": "æµ‹è¯•è´Ÿè´£äºº"
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### ç¼–è¾‘æäº¤è§’è‰²

* è¯·æ±‚è·¯å¾„ï¼šroles/:id
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| -------- | -------- | --------------------- |
| :id      | è§’è‰² ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| roleName | è§’è‰²åç§° | ä¸èƒ½ä¸ºç©º              |
| roleDesc | è§’è‰²æè¿° | å¯ä»¥ä¸ºç©º              |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "roleId": 31,
        "roleName": "æµ‹è¯•è§’è‰²",
        "roleDesc": "æµ‹è¯•è§’è‰²æè¿°"
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### åˆ é™¤è§’è‰²

* è¯·æ±‚è·¯å¾„ï¼šroles/:id
* è¯·æ±‚æ–¹æ³•ï¼šdelete
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| :id    | è§’è‰² ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”æ•°æ®

```javascript
{
    "data": null,
    "meta": {
        "msg": "åˆ é™¤æˆåŠŸ",
        "status": 200
    }
}
```

### è§’è‰²æˆæƒ

* è¯·æ±‚è·¯å¾„ï¼šroles/:roleId/rights
* è¯·æ±‚æ–¹æ³•ï¼špost
* è¯·æ±‚å‚æ•°

| å‚æ•°å  | å‚æ•°è¯´æ˜     | å¤‡æ³¨                      |
| ------- | ------------ | ------------------------- |
| :roleId | è§’è‰² ID      | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­`     |
| rids    | æƒé™ ID åˆ—è¡¨ | ä»¥ `,` åˆ†å‰²çš„æƒé™ ID åˆ—è¡¨ |

* å“åº”æ•°æ®

```javascript
{
    "data": null,
    "meta": {
        "msg": "æ›´æ–°æˆåŠŸ",
        "status": 200
    }
}
```

### åˆ é™¤è§’è‰²æŒ‡å®šæƒé™

* è¯·æ±‚è·¯å¾„ï¼šroles/:roleId/rights/:rightId
* è¯·æ±‚æ–¹æ³•ï¼šdelete
* è¯·æ±‚å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| -------- | -------- | --------------------- |
| :roleId  | è§’è‰² ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| :rightId | æƒé™ ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”æ•°æ®è¯´æ˜
  * è¿”å›å½“å‰æ‰€æœ‰æ‹¥æœ‰çš„è§’è‰²ä¿¡æ¯
* å“åº”æ•°æ®

```javascript
{
    "data": [
        {
            "id": 101,
            "authName": "å•†å“ç®¡ç†",
            "path": null,
            "children": [
                {
                    "id": 104,
                    "authName": "å•†å“åˆ—è¡¨",
                    "path": null,
                    "children": [
                        {
                            "id": 105,
                            "authName": "æ·»åŠ å•†å“",
                            "path": null
                        },
                        {
                            "id": 116,
                            "authName": "ä¿®æ”¹",
                            "path": null
                        }
                    ]
                }
            ]
        }
    ],
    "meta": {
        "msg": "å–æ¶ˆæƒé™æˆåŠŸ",
        "status": 200
    }
}
```

## å•†å“åˆ†ç±»ç®¡ç†

### å•†å“æ•°æ®åˆ—è¡¨

* è¯·æ±‚è·¯å¾„ï¼šcategories
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                                         |
| ------ | -------- | -------------------------------------------- |
| type   | [1,2,3]  | å€¼ï¼š1ï¼Œ2ï¼Œ3 åˆ†åˆ«è¡¨ç¤ºæ˜¾ç¤ºä¸€å±‚äºŒå±‚ä¸‰å±‚åˆ†ç±»åˆ—è¡¨ |

* å“åº”å‚æ•°

| å‚æ•°å    | å‚æ•°è¯´æ˜     | å¤‡æ³¨ |
| --------- | ------------ | ---- |
| cat_id    | åˆ†ç±» ID      |      |
| cat_name  | åˆ†ç±»åç§°     |      |
| cat_pid   | åˆ†ç±»çˆ¶ ID    |      |
| cat_level | åˆ†ç±»å½“å‰å±‚çº§ |      |

* å“åº”æ•°æ®ğŸŒ¹

```javascript
{
    "data": [
        {
            "cat_id": 1,
            "cat_name": "æ‰‹æœºç›¸æœº",
            "cat_pid": 0,
            "cat_level": 0
        },
        {
            "cat_id": 2,
            "cat_name": "ç”µè„‘åŠå…¬",
            "cat_pid": 0,
            "cat_level": 0
        }
    ],
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### æ·»åŠ åˆ†ç±»

* è¯·æ±‚è·¯å¾„ï¼šcategories
* è¯·æ±‚æ–¹æ³•ï¼špost
* è¯·æ±‚å‚æ•°

| å‚æ•°å    | å‚æ•°è¯´æ˜  | å¤‡æ³¨     |
| --------- | --------- | -------- |
| cat_pid   | åˆ†ç±»çˆ¶ ID | ä¸èƒ½ä¸ºç©º |
| cat_name  | åˆ†ç±»åç§°  | ä¸èƒ½ä¸ºç©º |
| cat_level | åˆ†ç±»å±‚çº§  | ä¸èƒ½ä¸ºç©º |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "cat_id": 62,
        "cat_name": "ç›¸æ¡†",
        "cat_pid": "1",
        "cat_level": "1"
    },
    "meta": {
        "msg": "åˆ›å»ºæˆåŠŸ",
        "status": 201
    }
}
```

### æ ¹æ® id æŸ¥è¯¢åˆ†ç±»

* è¯·æ±‚è·¯å¾„ï¼šcategories/:id
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| :id    | åˆ†ç±» ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "cat_id": 3,
        "cat_name": "å¨å«ç”µå™¨",
        "cat_pid": 0,
        "cat_level": 0
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### ç¼–è¾‘æäº¤åˆ†ç±»

* è¯·æ±‚è·¯å¾„ï¼šcategories/:id
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| -------- | -------- | --------------------- |
| :id      | åˆ†ç±» ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| cat_name | åˆ†ç±»åç§° | ä¸èƒ½ä¸ºç©º              |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "cat_id": 22,
        "cat_name": "è‡ªæ‹æ†",
        "cat_pid": 7,
        "cat_level": 2
    },
    "meta": {
        "msg": "æ›´æ–°æˆåŠŸ",
        "status": 200
    }
}
```

### åˆ é™¤åˆ†ç±»

* è¯·æ±‚è·¯å¾„ï¼šcategories/:id
* è¯·æ±‚æ–¹æ³•ï¼šdelete
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| :id    | åˆ†ç±» ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”æ•°æ®

```javascript
{
    "data": null,
    "meta": {
        "msg": "åˆ é™¤æˆåŠŸ",
        "status": 200
    }
}
```

## åˆ†ç±»å‚æ•°ç®¡ç†

### å‚æ•°åˆ—è¡¨

* è¯·æ±‚è·¯å¾„ï¼šcategories/:id/attributes
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜    | å¤‡æ³¨                                                      |
| ------ | ----------- | --------------------------------------------------------- |
| :id    | åˆ†ç±» ID     | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­`                                     |
| sel    | [only,many] | ä¸èƒ½ä¸ºç©º,é€šè¿‡ only æˆ– many æ¥è·å–åˆ†ç±»é™æ€å‚æ•°è¿˜æ˜¯åŠ¨æ€å‚æ•° |

* å“åº”å‚æ•°

| å‚æ•°å     | å‚æ•°è¯´æ˜                                       | å¤‡æ³¨ |
| ---------- | ---------------------------------------------- | ---- |
| attr_id    | åˆ†ç±»å‚æ•° ID                                    |      |
| attr_name  | åˆ†ç±»å‚æ•°åç§°                                   |      |
| cat_id     | åˆ†ç±»å‚æ•°æ‰€å±åˆ†ç±»                               |      |
| attr_sel   | only:è¾“å…¥æ¡†(å”¯ä¸€) many:åå°ä¸‹æ‹‰åˆ—è¡¨/å‰å°å•é€‰æ¡† |      |
| attr_write | manual:æ‰‹å·¥å½•å…¥ list:ä»åˆ—è¡¨é€‰æ‹©                |      |
| attr_vals  | å¦‚æœ attr_write:list,é‚£ä¹ˆæœ‰å€¼ï¼Œè¯¥å€¼ä»¥é€—å·åˆ†éš”  |      |

* å“åº”æ•°æ®

```javascript
{
    "data": [
        {
            "attr_id": 1,
            "attr_name": "cpu",
            "cat_id": 22,
            "attr_sel": "only",
            "attr_write": "manual",
            "attr_vals": "ffff"
        }
    ],
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### æ·»åŠ åŠ¨æ€å‚æ•°æˆ–è€…é™æ€å±æ€§

* è¯·æ±‚è·¯å¾„ï¼šcategories/:id/attributes
* è¯·æ±‚æ–¹æ³•ï¼špost
* è¯·æ±‚å‚æ•°

| å‚æ•°å    | å‚æ•°è¯´æ˜                                   | å¤‡æ³¨                  |
| --------- | ------------------------------------------ | --------------------- |
| :id       | åˆ†ç±» ID                                    | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| attr_name | å‚æ•°åç§°                                   | ä¸èƒ½ä¸ºç©º              |
| attr_sel  | [only,many]                                | ä¸èƒ½ä¸ºç©º              |
| attr_vals | å¦‚æœæ˜¯ many å°±éœ€è¦å¡«å†™å€¼çš„é€‰é¡¹ï¼Œä»¥é€—å·åˆ†éš” |                       |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "attr_id": 44,
        "attr_name": "æµ‹è¯•å‚æ•°",
        "cat_id": "1",
        "attr_sel": "many",
        "attr_write": "list",
        "attr_vals": "a,b,c"
    },
    "meta": {
        "msg": "åˆ›å»ºæˆåŠŸ",
        "status": 201
    }
}
```

### åˆ é™¤å‚æ•°

* è¯·æ±‚è·¯å¾„ï¼šcategories/:id/attributes/:attrid
* è¯·æ±‚æ–¹æ³•ï¼šdelete
* è¯·æ±‚å‚æ•°

| å‚æ•°å  | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------- | -------- | --------------------- |
| :id     | åˆ†ç±» ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| :attrid | å‚æ•° ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”æ•°æ®

```javascript
{
    "data": null,
    "meta": {
        "msg": "åˆ é™¤æˆåŠŸ",
        "status": 200
    }
}
```

### æ ¹æ® ID æŸ¥è¯¢å‚æ•°

* è¯·æ±‚è·¯å¾„ï¼šcategories/:id/attributes/:attrId
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å    | å‚æ•°è¯´æ˜                                   | å¤‡æ³¨                  |
| --------- | ------------------------------------------ | --------------------- |
| :id       | åˆ†ç±» ID                                    | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| :attrId   | å±æ€§ ID                                    | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| attr_sel  | [only,many]                                | ä¸èƒ½ä¸ºç©º              |
| attr_vals | å¦‚æœæ˜¯ many å°±éœ€è¦å¡«å†™å€¼çš„é€‰é¡¹ï¼Œä»¥é€—å·åˆ†éš” |                       |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "attr_id": 1,
        "attr_name": "cpu",
        "cat_id": 22,
        "attr_sel": "only",
        "attr_write": "manual",
        "attr_vals": "ffff"
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### ç¼–è¾‘æäº¤å‚æ•°

* è¯·æ±‚è·¯å¾„ï¼šcategories/:id/attributes/:attrId
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å  | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------- | -------- | --------------------- |
| :id     | åˆ†ç±» ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| :attrId | å±æ€§ ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "attr_id": 9,
        "attr_name": "æµ‹è¯•æ›´æ–°",
        "cat_id": "43",
        "attr_sel": "only",
        "attr_write": "manual",
        "attr_vals": "abc"
    },
    "meta": {
        "msg": "æ›´æ–°æˆåŠŸ",
        "status": 200
    }
}
```

## å•†å“ç®¡ç†

### å•†å“åˆ—è¡¨æ•°æ®

* è¯·æ±‚è·¯å¾„ï¼šgoods
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å   | å‚æ•°è¯´æ˜     | å¤‡æ³¨     |
| -------- | ------------ | -------- |
| query    | æŸ¥è¯¢å‚æ•°     | å¯ä»¥ä¸ºç©º |
| pagenum  | å½“å‰é¡µç      | ä¸èƒ½ä¸ºç©º |
| pagesize | æ¯é¡µæ˜¾ç¤ºæ¡æ•° | ä¸èƒ½ä¸ºç©º |

* å“åº”å‚æ•°

| å‚æ•°å       | å‚æ•°è¯´æ˜     | å¤‡æ³¨                                   |
| ------------ | ------------ | -------------------------------------- |
| total        | æ€»å…±å•†å“æ¡æ•° |                                        |
| pagenum      | å½“å‰å•†å“é¡µæ•° |                                        |
| goods_id     | å•†å“ ID      |                                        |
| goods_name   | å•†å“åç§°     |                                        |
| goods_price  | ä»·æ ¼         |                                        |
| goods_number | æ•°é‡         |                                        |
| goods_weight | é‡é‡         | ä¸èƒ½ä¸ºç©º                               |
| goods_state  | å•†å“çŠ¶æ€     | å•†å“çŠ¶æ€ 0: æœªé€šè¿‡ 1: å®¡æ ¸ä¸­ 2: å·²å®¡æ ¸ |
| add_time     | æ·»åŠ æ—¶é—´     |                                        |
| upd_time     | æ›´æ–°æ—¶é—´     |                                        |
| hot_mumber   | çƒ­é”€å“æ•°é‡   |                                        |
| is_promote   | æ˜¯å¦æ˜¯çƒ­é”€å“ |                                        |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "total": 50,
        "pagenum": "1",
        "goods": [
            {
                "goods_id": 144,
                "goods_name": "asfdsd",
                "goods_price": 1,
                "goods_number": 1,
                "goods_weight": 1,
                "goods_state": null,
                "add_time": 1512954923,
                "upd_time": 1512954923,
                "hot_mumber": 0,
                "is_promote": false
            }
        ]
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### æ·»åŠ å•†å“

* è¯·æ±‚è·¯å¾„ï¼šgoods
* è¯·æ±‚æ–¹æ³•ï¼špost
* è¯·æ±‚å‚æ•°

| å‚æ•°å          | å‚æ•°è¯´æ˜                   | å¤‡æ³¨     |
| --------------- | -------------------------- | -------- |
| goods_name      | å•†å“åç§°                   | ä¸èƒ½ä¸ºç©º |
| goods_cat       | ä»¥ä¸º','åˆ†å‰²çš„åˆ†ç±»åˆ—è¡¨      | ä¸èƒ½ä¸ºç©º |
| goods_price     | ä»·æ ¼                       | ä¸èƒ½ä¸ºç©º |
| goods_number    | æ•°é‡                       | ä¸èƒ½ä¸ºç©º |
| goods_weight    | é‡é‡                       | ä¸èƒ½ä¸ºç©º |
| goods_introduce | ä»‹ç»                       | å¯ä»¥ä¸ºç©º |
| pics            | ä¸Šä¼ çš„å›¾ç‰‡ä¸´æ—¶è·¯å¾„ï¼ˆå¯¹è±¡ï¼‰ | å¯ä»¥ä¸ºç©º |
| attrs           | å•†å“çš„å‚æ•°ï¼ˆæ•°ç»„ï¼‰         | å¯ä»¥ä¸ºç©º |

* è¯·æ±‚æ•°æ®

```javascript
{
  "goods_name":"test_goods_name2",
  "goods_price":20,
  "goods_number":30,
  "goods_weight":40,
  "goods_introduce":"abc",
  "pics":[
    {"pic":"/tmp_uploads/30f08d52c551ecb447277eae232304b8"}
    ],
  "attrs":[
    {
      "attr_id":15,
      "attr_value":"ddd"
    },
    {
      "attr_id":15,
      "attr_value":"eee"
    }
    ]
}
```

* å“åº”å‚æ•°

| å‚æ•°å       | å‚æ•°è¯´æ˜                   | å¤‡æ³¨                                                                                                                  |
| ------------ | -------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| total        | æ€»å…±å•†å“æ¡æ•°               |                                                                                                                       |
| pagenum      | å½“å‰å•†å“é¡µæ•°               |                                                                                                                       |
| goods_id     | å•†å“ ID                    |                                                                                                                       |
| goods_cat    | ä»¥ä¸º','åˆ†å‰²çš„åˆ†ç±»åˆ—è¡¨      |                                                                                                                       |
| goods_name   | å•†å“åç§°                   |                                                                                                                       |
| goods_price  | ä»·æ ¼                       |                                                                                                                       |
| goods_number | æ•°é‡                       |                                                                                                                       |
| goods_weight | é‡é‡                       | ä¸èƒ½ä¸ºç©º                                                                                                              |
| goods_state  | å•†å“çŠ¶æ€                   | å•†å“çŠ¶æ€ 0: æœªé€šè¿‡ 1: å®¡æ ¸ä¸­ 2: å·²å®¡æ ¸                                                                                |
| add_time     | æ·»åŠ æ—¶é—´                   |                                                                                                                       |
| upd_time     | æ›´æ–°æ—¶é—´                   |                                                                                                                       |
| hot_mumber   | çƒ­é”€å“æ•°é‡                 |                                                                                                                       |
| is_promote   | æ˜¯å¦æ˜¯çƒ­é”€å“               |                                                                                                                       |
| pics         | ä¸Šä¼ çš„å›¾ç‰‡ä¸´æ—¶è·¯å¾„ï¼ˆå¯¹è±¡ï¼‰ | pics_id:å›¾ç‰‡ ID,goods_id:å•†å“ ID,pics_big:å¤§å›¾,pics_mid:ä¸­å›¾,pics_sma:å°å›¾                                            |
| attrs        | å•†å“çš„å‚æ•°ï¼ˆæ•°ç»„ï¼‰         | goods_id:å•†å“ ID,attr_value:å½“å‰å•†å“çš„å‚æ•°å€¼,add_price:æµ®åŠ¨ä»·æ ¼,attr_vals:é¢„å®šä¹‰çš„å‚æ•°å€¼,attr_sel:æ‰‹åŠ¨è¾“å…¥ï¼Œè¿˜æ˜¯å•é€‰, |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "goods_id": 145,
        "goods_name": "test_goods_name2",
        "goods_price": 20,
        "cat_id": 1,
        "goods_number": 30,
        "goods_weight": 40,
        "goods_introduce": "abc",
        "goods_big_logo": "",
        "goods_small_logo": "",
        "goods_state": 1,
        "add_time": 1512962370,
        "upd_time": 1512962370,
        "hot_mumber": 0,
        "is_promote": false,
        "pics": [
            {
                "pics_id": 397,
                "goods_id": 145,
                "pics_big": "uploads/goodspics/big_30f08d52c551ecb447277eae232304b8",
                "pics_mid": "uploads/goodspics/mid_30f08d52c551ecb447277eae232304b8",
                "pics_sma": "uploads/goodspics/sma_30f08d52c551ecb447277eae232304b8"
            }
        ],
        "attrs": [
            {
                "goods_id": 145,
                "attr_id": 15,
                "attr_value": "ddd",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            },
            {
                "goods_id": 145,
                "attr_id": 15,
                "attr_value": "eee",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            }
        ]
    },
    "meta": {
        "msg": "åˆ›å»ºå•†å“æˆåŠŸ",
        "status": 201
    }
}
```

### æ ¹æ® ID æŸ¥è¯¢å•†å“

* è¯·æ±‚è·¯å¾„ï¼šgoods/:id
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| id     | å•†å“ ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”å‚æ•°

| å‚æ•°å       | å‚æ•°è¯´æ˜                   | å¤‡æ³¨                                                                                                                  |
| ------------ | -------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| total        | æ€»å…±å•†å“æ¡æ•°               |                                                                                                                       |
| pagenum      | å½“å‰å•†å“é¡µæ•°               |                                                                                                                       |
| goods_id     | å•†å“ ID                    |                                                                                                                       |
| goods_name   | å•†å“åç§°                   |                                                                                                                       |
| goods_price  | ä»·æ ¼                       |                                                                                                                       |
| goods_number | æ•°é‡                       |                                                                                                                       |
| goods_weight | é‡é‡                       | ä¸èƒ½ä¸ºç©º                                                                                                              |
| goods_state  | å•†å“çŠ¶æ€                   | å•†å“çŠ¶æ€ 0: æœªé€šè¿‡ 1: å®¡æ ¸ä¸­ 2: å·²å®¡æ ¸                                                                                |
| add_time     | æ·»åŠ æ—¶é—´                   |                                                                                                                       |
| upd_time     | æ›´æ–°æ—¶é—´                   |                                                                                                                       |
| hot_mumber   | çƒ­é”€å“æ•°é‡                 |                                                                                                                       |
| is_promote   | æ˜¯å¦æ˜¯çƒ­é”€å“               |                                                                                                                       |
| pics         | ä¸Šä¼ çš„å›¾ç‰‡ä¸´æ—¶è·¯å¾„ï¼ˆå¯¹è±¡ï¼‰ | pics_id:å›¾ç‰‡ ID,goods_id:å•†å“ ID,pics_big:å¤§å›¾,pics_mid:ä¸­å›¾,pics_sma:å°å›¾                                            |
| attrs        | å•†å“çš„å‚æ•°ï¼ˆæ•°ç»„ï¼‰         | goods_id:å•†å“ ID,attr_value:å½“å‰å•†å“çš„å‚æ•°å€¼,add_price:æµ®åŠ¨ä»·æ ¼,attr_vals:é¢„å®šä¹‰çš„å‚æ•°å€¼,attr_sel:æ‰‹åŠ¨è¾“å…¥ï¼Œè¿˜æ˜¯å•é€‰, |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "goods_id": 145,
        "goods_name": "test_goods_name2",
        "goods_price": 20,
        "goods_number": 30,
        "goods_weight": 40,
        "goods_introduce": "abc",
        "goods_big_logo": "",
        "goods_small_logo": "",
        "goods_state": 1,
        "add_time": 1512962370,
        "upd_time": 1512962370,
        "hot_mumber": 0,
        "is_promote": false,
        "pics": [
            {
                "pics_id": 397,
                "goods_id": 145,
                "pics_big": "uploads/goodspics/big_30f08d52c551ecb447277eae232304b8",
                "pics_mid": "uploads/goodspics/mid_30f08d52c551ecb447277eae232304b8",
                "pics_sma": "uploads/goodspics/sma_30f08d52c551ecb447277eae232304b8"
            }
        ],
        "attrs": [
            {
                "goods_id": 145,
                "attr_id": 15,
                "attr_value": "ddd",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            },
            {
                "goods_id": 145,
                "attr_id": 15,
                "attr_value": "eee",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            }
        ]
    },
    "meta": {
        "msg": "åˆ›å»ºå•†å“æˆåŠŸ",
        "status": 201
    }
}
```

### ç¼–è¾‘æäº¤å•†å“

* è¯·æ±‚è·¯å¾„ï¼šgoods/:id
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å          | å‚æ•°è¯´æ˜                   | å¤‡æ³¨                  |
| --------------- | -------------------------- | --------------------- |
| id              | å•†å“ ID                    | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |
| goods_name      | å•†å“åç§°                   | ä¸èƒ½ä¸ºç©º              |
| goods_price     | ä»·æ ¼                       | ä¸èƒ½ä¸ºç©º              |
| goods_number    | æ•°é‡                       | ä¸èƒ½ä¸ºç©º              |
| goods_weight    | é‡é‡                       | ä¸èƒ½ä¸ºç©º              |
| goods_introduce | ä»‹ç»                       | å¯ä»¥ä¸ºç©º              |
| pics            | ä¸Šä¼ çš„å›¾ç‰‡ä¸´æ—¶è·¯å¾„ï¼ˆå¯¹è±¡ï¼‰ | å¯ä»¥ä¸ºç©º              |
| attrs           | å•†å“çš„å‚æ•°ï¼ˆæ•°ç»„ï¼‰         | å¯ä»¥ä¸ºç©º              |

* è¯·æ±‚æ•°æ®

```javascript
{
  "goods_name":"test_goods_name2",
  "goods_price":20,
  "goods_number":30,
  "goods_weight":40,
  "goods_introduce":"abc",
  "pics":[
    {"pic":"/tmp_uploads/30f08d52c551ecb447277eae232304b8"}
    ],
  "attrs":[
    {
      "attr_id":15,
      "attr_value":"ddd"
    },
    {
      "attr_id":15,
      "attr_value":"eee"
    }
    ]
}
```

* å“åº”å‚æ•°

| å‚æ•°å       | å‚æ•°è¯´æ˜                   | å¤‡æ³¨                                                                                                                  |
| ------------ | -------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| total        | æ€»å…±å•†å“æ¡æ•°               |                                                                                                                       |
| pagenum      | å½“å‰å•†å“é¡µæ•°               |                                                                                                                       |
| goods_id     | å•†å“ ID                    |                                                                                                                       |
| goods_name   | å•†å“åç§°                   |                                                                                                                       |
| goods_price  | ä»·æ ¼                       |                                                                                                                       |
| goods_number | æ•°é‡                       |                                                                                                                       |
| goods_weight | é‡é‡                       | ä¸èƒ½ä¸ºç©º                                                                                                              |
| goods_state  | å•†å“çŠ¶æ€                   | å•†å“çŠ¶æ€ 0: æœªé€šè¿‡ 1: å®¡æ ¸ä¸­ 2: å·²å®¡æ ¸                                                                                |
| add_time     | æ·»åŠ æ—¶é—´                   |                                                                                                                       |
| upd_time     | æ›´æ–°æ—¶é—´                   |                                                                                                                       |
| hot_mumber   | çƒ­é”€å“æ•°é‡                 |                                                                                                                       |
| is_promote   | æ˜¯å¦æ˜¯çƒ­é”€å“               |                                                                                                                       |
| pics         | ä¸Šä¼ çš„å›¾ç‰‡ä¸´æ—¶è·¯å¾„ï¼ˆå¯¹è±¡ï¼‰ | pics_id:å›¾ç‰‡ ID,goods_id:å•†å“ ID,pics_big:å¤§å›¾,pics_mid:ä¸­å›¾,pics_sma:å°å›¾                                            |
| attrs        | å•†å“çš„å‚æ•°ï¼ˆæ•°ç»„ï¼‰         | goods_id:å•†å“ ID,attr_value:å½“å‰å•†å“çš„å‚æ•°å€¼,add_price:æµ®åŠ¨ä»·æ ¼,attr_vals:é¢„å®šä¹‰çš„å‚æ•°å€¼,attr_sel:æ‰‹åŠ¨è¾“å…¥ï¼Œè¿˜æ˜¯å•é€‰, |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "goods_id": 145,
        "goods_name": "test_goods_name2",
        "goods_price": 20,
        "goods_number": 30,
        "goods_weight": 40,
        "goods_introduce": "abc",
        "goods_big_logo": "",
        "goods_small_logo": "",
        "goods_state": 1,
        "add_time": 1512962370,
        "upd_time": 1512962370,
        "hot_mumber": 0,
        "is_promote": false,
        "pics": [
            {
                "pics_id": 397,
                "goods_id": 145,
                "pics_big": "uploads/goodspics/big_30f08d52c551ecb447277eae232304b8",
                "pics_mid": "uploads/goodspics/mid_30f08d52c551ecb447277eae232304b8",
                "pics_sma": "uploads/goodspics/sma_30f08d52c551ecb447277eae232304b8"
            }
        ],
        "attrs": [
            {
                "goods_id": 145,
                "attr_id": 15,
                "attr_value": "ddd",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            },
            {
                "goods_id": 145,
                "attr_id": 15,
                "attr_value": "eee",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            }
        ]
    },
    "meta": {
        "msg": "åˆ›å»ºå•†å“æˆåŠŸ",
        "status": 201
    }
}
```

### åˆ é™¤å•†å“

* è¯·æ±‚è·¯å¾„ï¼šgoods/:id
* è¯·æ±‚æ–¹æ³•ï¼šdelete
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| id     | å•†å“ ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”æ•°æ®

```javascript
{
    "data": null,
    "meta": {
        "msg": "åˆ é™¤æˆåŠŸ",
        "status": 200
    }
}
```

###åŒæ­¥å•†å“å›¾ç‰‡

* è¯·æ±‚è·¯å¾„ï¼šgoods/:id/pics
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜     | å¤‡æ³¨                                                                                |
| ------ | ------------ | ----------------------------------------------------------------------------------- |
| id     | å•†å“ ID      | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­`                                                               |
| pics   | å•†å“å›¾ç‰‡é›†åˆ | å¦‚æœæœ‰ pics_id å­—æ®µä¼šä¿ç•™è¯¥å›¾ç‰‡ï¼Œå¦‚æœæ²¡æœ‰ pics_id ä½†æ˜¯æœ‰ pic å­—æ®µå°±ä¼šæ–°ç”Ÿæˆå›¾ç‰‡æ•°æ® |

* è¯·æ±‚æ•°æ®

```javascript
;[
  { pic: 'tmp_uploads/db28f6316835836e97653b5c75e418be.png' },
  {
    pics_id: 397,
    goods_id: 145,
    pics_big: 'uploads/goodspics/big_30f08d52c551ecb447277eae232304b8',
    pics_mid: 'uploads/goodspics/mid_30f08d52c551ecb447277eae232304b8',
    pics_sma: 'uploads/goodspics/sma_30f08d52c551ecb447277eae232304b8'
  }
]
```

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "goods_id": 96,
        "goods_name": "iphoneXX",
        "goods_price": 2,
        "goods_number": 22,
        "goods_weight": 22,
        "goods_introduce": null,
        "goods_big_logo": "./uploads/goods/20171113/483a3b8e99e534ec3e4312dbbaee7c9d.jpg",
        "goods_small_logo": "./uploads/goods/20171113/small_483a3b8e99e534ec3e4312dbbaee7c9d.jpg",
        "goods_state": 0,
        "is_del": "1",
        "add_time": 1510045904,
        "upd_time": 1512635159,
        "delete_time": 1512635159,
        "hot_mumber": 0,
        "is_promote": false,
        "pics": [
            {
                "pics_id": 383,
                "goods_id": 96,
                "pics_big": "uploads/goodspics/big_6f5750132abd3f5b2b93dd722fcde653.jpg",
                "pics_mid": "uploads/goodspics/mid_6f5750132abd3f5b2b93dd722fcde653.jpg",
                "pics_sma": "uploads/goodspics/sma_6f5750132abd3f5b2b93dd722fcde653.jpg"
            }
        ],
        "attrs": [
            {
                "goods_id": 96,
                "attr_id": 15,
                "attr_value": "eee",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            },
            {
                "goods_id": 96,
                "attr_id": 15,
                "attr_value": "ddd",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            }
        ]
    },
    "meta": {
        "msg": "æ›´æ–°æˆåŠŸ",
        "status": 200
    }
}
```

###åŒæ­¥å•†å“å±æ€§

* è¯·æ±‚è·¯å¾„ï¼šgoods/:id/attributes
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| id     | å•†å“ ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* è¯·æ±‚æ•°æ®

```javascript
;[
  {
    attr_id: 15,
    attr_value: 'ddd'
  },
  {
    attr_id: 15,
    attr_value: 'eee'
  }
]
```

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "goods_id": 96,
        "goods_name": "iphoneXX",
        "goods_price": 2,
        "goods_number": 22,
        "goods_weight": 22,
        "goods_introduce": null,
        "goods_big_logo": "./uploads/goods/20171113/483a3b8e99e534ec3e4312dbbaee7c9d.jpg",
        "goods_small_logo": "./uploads/goods/20171113/small_483a3b8e99e534ec3e4312dbbaee7c9d.jpg",
        "goods_state": 0,
        "is_del": "1",
        "add_time": 1510045904,
        "upd_time": 1512635159,
        "delete_time": 1512635159,
        "hot_mumber": 0,
        "is_promote": false,
        "pics": [
            {
                "pics_id": 383,
                "goods_id": 96,
                "pics_big": "uploads/goodspics/big_6f5750132abd3f5b2b93dd722fcde653.jpg",
                "pics_mid": "uploads/goodspics/mid_6f5750132abd3f5b2b93dd722fcde653.jpg",
                "pics_sma": "uploads/goodspics/sma_6f5750132abd3f5b2b93dd722fcde653.jpg"
            }
        ],
        "attrs": [
            {
                "goods_id": 96,
                "attr_id": 15,
                "attr_value": "eee",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            },
            {
                "goods_id": 96,
                "attr_id": 15,
                "attr_value": "ddd",
                "add_price": null,
                "attr_name": "fffffff",
                "attr_sel": "many",
                "attr_write": "list",
                "attr_vals": ""
            }
        ]
    },
    "meta": {
        "msg": "æ›´æ–°æˆåŠŸ",
        "status": 200
    }
}
```

###å•†å“å›¾ç‰‡å¤„ç†å¿…é¡»å®‰è£… GraphicsMagick

* linux

```
apt-get install GraphicsMagick
```

* Mac OS X

```
brew install GraphicsMagick
```

* Windows
  [ç‚¹å‡»ä¸‹è½½](https://sourceforge.net/projects/graphicsmagick/files/graphicsmagick-binaries/1.3.27/GraphicsMagick-1.3.27-Q8-win64-dll.exe/download)

## å›¾ç‰‡ä¸Šä¼ 

* è¯·æ±‚è·¯å¾„ï¼šupload
* è¯·æ±‚æ–¹æ³•ï¼špost
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨ |
| ------ | -------- | ---- |
| file   | ä¸Šä¼ æ–‡ä»¶ |      |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "tmp_path": "tmp_uploads/ccfc5179a914e94506bcbb7377e8985f.png",
        "url": "http://127.0.0.1:8888tmp_uploads/ccfc5179a914e94506bcbb7377e8985f.png"
    },
    "meta": {
        "msg": "ä¸Šä¼ æˆåŠŸ",
        "status": 200
    }
}
```

## è®¢å•ç®¡ç†

### è®¢å•æ•°æ®åˆ—è¡¨

* è¯·æ±‚è·¯å¾„ï¼šorders
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å               | å‚æ•°è¯´æ˜        | å¤‡æ³¨     |
| -------------------- | --------------- | -------- |
| query                | æŸ¥è¯¢å‚æ•°        | å¯ä»¥ä¸ºç©º |
| pagenum              | å½“å‰é¡µç         | ä¸èƒ½ä¸ºç©º |
| pagesize             | æ¯é¡µæ˜¾ç¤ºæ¡æ•°    | ä¸èƒ½ä¸ºç©º |
| user_id              | ç”¨æˆ· ID         | å¯ä»¥ä¸ºç©º |
| pay_status           | æ”¯ä»˜çŠ¶æ€        | å¯ä»¥ä¸ºç©º |
| is_send              | æ˜¯å¦å‘è´§        | å¯ä»¥ä¸ºç©º |
| order_fapiao_title   | ['ä¸ªäºº','å…¬å¸'] | å¯ä»¥ä¸ºç©º |
| order_fapiao_company | å…¬å¸åç§°        | å¯ä»¥ä¸ºç©º |
| order_fapiao_content | å‘ç¥¨å†…å®¹        | å¯ä»¥ä¸ºç©º |
| consignee_addr       | å‘è´§åœ°å€        | å¯ä»¥ä¸ºç©º |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "total": 1,
        "pagenum": "1",
        "goods": [
            {
                "order_id": 47,
                "user_id": 133,
                "order_number": "itcast-59e7502d7993d",
                "order_price": 322,
                "order_pay": "1",
                "is_send": "æ˜¯",
                "trade_no": "",
                "order_fapiao_title": "ä¸ªäºº",
                "order_fapiao_company": "",
                "order_fapiao_content": "åŠå…¬ç”¨å“",
                "consignee_addr": "a:7:{s:6:\"cgn_id\";i:1;s:7:\"user_id\";i:133;s:8:\"cgn_name\";s:9:\"ç‹äºŒæŸ±\";s:11:\"cgn_address\";s:51:\"åŒ—äº¬å¸‚æµ·æ·€åŒºè‹å·è¡—é•¿è¿œå¤©åœ°å¤§å¦305å®¤\";s:7:\"cgn_tel\";s:11:\"13566771298\";s:8:\"cgn_code\";s:6:\"306810\";s:11:\"delete_time\";N;}",
                "pay_status": "1",
                "create_time": 1508331565,
                "update_time": 1508331565
            }
        ]
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### ä¿®æ”¹è®¢å•çŠ¶æ€

* è¯·æ±‚è·¯å¾„ï¼šorders/:id
* è¯·æ±‚æ–¹æ³•ï¼šput
* è¯·æ±‚å‚æ•°

| å‚æ•°å       | å‚æ•°è¯´æ˜     | å¤‡æ³¨                                       |
| ------------ | ------------ | ------------------------------------------ |
| id           | è®¢å• ID      | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­`                      |
| is_send      | è®¢å•æ˜¯å¦å‘è´§ | 1:å·²ç»å‘è´§ï¼Œ0:æœªå‘è´§                       |
| order_pay    | è®¢å•æ”¯ä»˜     | æ”¯ä»˜æ–¹å¼ 0 æœªæ”¯ä»˜ 1 æ”¯ä»˜å® 2 å¾®ä¿¡ 3 é“¶è¡Œå¡ |
| order_price  | è®¢å•ä»·æ ¼     |                                            |
| order_number | è®¢å•æ•°é‡     |                                            |
| pay_status   | æ”¯ä»˜çŠ¶æ€     | è®¢å•çŠ¶æ€ï¼š 0 æœªä»˜æ¬¾ã€1 å·²ä»˜æ¬¾              |

* è¯·æ±‚æ•°æ®è¯´æ˜

  * æ‰€æœ‰è¯·æ±‚æ•°æ®éƒ½æ˜¯å¢é‡æ›´æ–°ï¼Œå¦‚æœå‚æ•°ä¸å¡«å†™ï¼Œå°±ä¸ä¼šæ›´æ–°è¯¥å­—æ®µ

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "order_id": 67,
        "user_id": 1,
        "order_number": "itcast-g7kmck71vjaujfgoi",
        "order_price": 20,
        "order_pay": "0",
        "is_send": "å¦",
        "trade_no": "",
        "order_fapiao_title": "ä¸ªäºº",
        "order_fapiao_company": "",
        "order_fapiao_content": "",
        "consignee_addr": "",
        "pay_status": "0",
        "create_time": 1512533560,
        "update_time": 1512533560,
        "goods": [
            {
                "id": 82,
                "order_id": 67,
                "goods_id": 96,
                "goods_price": 333,
                "goods_number": 2,
                "goods_total_price": 999
            },
            {
                "id": 83,
                "order_id": 67,
                "goods_id": 95,
                "goods_price": 666,
                "goods_number": 5,
                "goods_total_price": 999
            }
        ]
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

### æŸ¥çœ‹è®¢å•è¯¦æƒ…

* è¯·æ±‚è·¯å¾„ï¼šorders/:id
* è¯·æ±‚æ–¹æ³•ï¼šget
* è¯·æ±‚å‚æ•°

| å‚æ•°å | å‚æ•°è¯´æ˜ | å¤‡æ³¨                  |
| ------ | -------- | --------------------- |
| id     | è®¢å• ID  | ä¸èƒ½ä¸ºç©º`æºå¸¦åœ¨urlä¸­` |

* å“åº”æ•°æ®

```javascript
{
    "data": {
        "order_id": 67,
        "user_id": 1,
        "order_number": "itcast-g7kmck71vjaujfgoi",
        "order_price": 20,
        "order_pay": "0",
        "is_send": "å¦",
        "trade_no": "",
        "order_fapiao_title": "ä¸ªäºº",
        "order_fapiao_company": "",
        "order_fapiao_content": "",
        "consignee_addr": "",
        "pay_status": "0",
        "create_time": 1512533560,
        "update_time": 1512533560,
        "goods": [
            {
                "id": 82,
                "order_id": 67,
                "goods_id": 96,
                "goods_price": 333,
                "goods_number": 2,
                "goods_total_price": 999
            },
            {
                "id": 83,
                "order_id": 67,
                "goods_id": 95,
                "goods_price": 666,
                "goods_number": 5,
                "goods_total_price": 999
            }
        ]
    },
    "meta": {
        "msg": "è·å–æˆåŠŸ",
        "status": 200
    }
}
```

## æ•°æ®ç»Ÿè®¡

### åŸºäºç±»å‹ç»Ÿè®¡ï¼ˆé¥¼å›¾ï¼‰

* è¯·æ±‚è·¯å¾„ï¼šreports/:type
* è¯·æ±‚æ–¹æ³•ï¼šget
* å“åº”æ•°æ®

### åŸºäºæ—¶é—´ç»Ÿè®¡ï¼ˆæŠ˜çº¿å›¾ï¼‰

* è¯·æ±‚è·¯å¾„ï¼šreports/:type
* è¯·æ±‚æ–¹æ³•ï¼šget
* å“åº”æ•°æ®

### åŸºäºé”€é‡ç»Ÿè®¡ï¼ˆæŸ±çŠ¶å›¾ï¼‰

* è¯·æ±‚è·¯å¾„ï¼šreports/:type
* è¯·æ±‚æ–¹æ³•ï¼šget
* å“åº”æ•°æ®
